<%- include('../../partials/head.ejs') %>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h4 class="my-4" style="color: white;">Search Result for - <%= searchTerm %> </h4>

      <div class="row">
        <% if (posts.length === 0) { %>
          <p>Nothing found</p>
        <% } else { %>
          <% posts.forEach(post => { %>
            <div class="col-md-4 mb-4">
              <div class="card">
                <% if (post.thumbnail) { %>
                  <img src="<%= post.thumbnail %>" alt="<%= post.title %>" class="card-img-top" />
                <% } else { %>
                  <img src="/uploads/No-Image-Placeholder.svg.webp" alt="Placeholder Image" class="card-img-top" />
                <% } %>
                <div class="card-body">
                  <a href="/explorer/<%= post._id %> " style="color: #222;">
                    <h5 class="card-title"><%= post.title %></h5>
                    <p class="card-text"><%= truncate(post.body) %></p>
                  </a>
                </div>
              </div>
            </div>
          <% }) %> 
        <% } %>
      </div>

      <nav class="d-flex flex-row justify-content-center">
        <ul class="pagination">
          <li class="page-item <%= currentPage === 1 && 'disabled' %>">
            <a
              href="<%= `/search/term=${searchTerm}&page=${currentPage - 1} `%> "
              class="page-link"
              >Previous</a
            >
          </li>
          <% for(let i = 1; i <= totalPage; i++) {%>
          <li class="page-item <%= currentPage === i && 'active' %>">
            <a
              href="<%= `/search/term=${searchTerm}&page=${i}` %> "
              class="page-link"
              ><%= i %>
            </a>
          </li>
          <% } %>
          <li class="page-item <%= totalPage <= currentPage && 'disabled' %>">
            <a
              href="<%= `/search/term=${searchTerm}&page=${currentPage + 1}` %> "
              class="page-link"
              >Next</a
            >
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<%- include('../../partials/footer.ejs') %>

<script src="/scripts/bookmarks.js"></script>
<script>
  document.body.style.backgroundImage = "url('./uploads/bg.jpeg')";
    document.body.style.backgroundSize = "cover"; // You can adjust this property as needed
    document.body.style.backgroundRepeat = "no-repeat";
    document.body.style.backgroundPosition = "center";
</script>

<body/>
<html/>
